<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <!-- 🦁 META TAGS ESPECIAIS PARA SAFARI/iPhone -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    
    <title>Receiver - Versão Safari</title>
    
    <!-- ✅ CSS ORIGINAL + CSS SAFARI -->
    <link rel="stylesheet" href="../mobile-style.css">
    <link rel="stylesheet" href="safari-mobile-style.css">
</head>
<body class="safari-version ios-device">
    <!-- 🦁 TELA DE CARREGAMENTO SAFARI -->
    <div id="safariLoading">
        <div style="text-align: center; color: white;">
            <h2>📱 Versão Otimizada</h2>
            <p>Para iPhone e Safari</p>
            <p style="font-size: 14px; margin-top: 20px;">Carregando...</p>
        </div>
    </div>

    <!-- ✅ SEU CONTEÚDO ORIGINAL (vamos adaptar gradualmente) -->
    <!-- Por enquanto, vamos manter a mesma estrutura -->
    <div id="loadingScreen" class="hidden-until-ready">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Preparando tradução...</p>
        </div>
    </div>

    <div class="app-container">
        <div class="video-container">
            <video id="localVideo" muted playsinline></video>
            <video id="remoteVideo" playsinline></video>
        </div>

        <div class="controls-container">
            <button id="toggleCamera" class="safari-btn">🔄 Câmera</button>
            <div id="texto-recebido" class="text-display"></div>
            <div id="click" class="click-instruction">
                <p>Toque para começar</p>
            </div>
        </div>

        <div class="header">
            <div class="logo" id="logo-traduz">
                <span class="language-flag">🏳️</span>
                <span class="local-Lang">🔴</span>
            </div>
            <div class="translator-mode" id="translator-label">
                Tradução em tempo real
            </div>
            <div class="remote-lang">
                <span class="remoter-Lang">🔴</span>
            </div>
        </div>

        <!-- QR Code Modal -->
        <div class="info-overlay hidden">
            <div class="info-content">
                <h3 id="qr-modal-title">Sua chave online</h3>
                <p id="qr-modal-description">Escaneie, compartilhe ou imprima</p>
                <div id="qrcode"></div>
                <button id="copiarLink" class="safari-btn">🔗 Copiar Link</button>
            </div>
        </div>
    </div>

    <!-- ✅ SCRIPTS ORIGINAIS (carregamos os adaptados depois) -->
    <!-- Por enquanto, carrega os originais para testar -->
    <script src="../core/webrtc-core.js"></script>
    <script src="../core/camera-vigilante.js"></script>
    <script src="../js/qrcode/qr-code-utils.js"></script>
    <script src="../js/receiver/receiver-ui.js"></script>

    <script>
        console.log('🦁 Safari Receiver HTML carregado!');
        
        // 🦁 Mostra que estamos na versão Safari
        document.addEventListener('DOMContentLoaded', function() {
            const loading = document.getElementById('safariLoading');
            if (loading) {
                setTimeout(() => {
                    loading.style.display = 'none';
                }, 2000);
            }
            
            console.log('✅ Safari Receiver pronto para adaptações');
        });
    </script>
</body>
</html>
